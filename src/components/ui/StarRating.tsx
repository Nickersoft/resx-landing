import { useId } from "react";

interface StarRatingProps extends React.SVGAttributes<SVGSVGElement> {
  rating: number;
}

const path =
  "M2.46 8.977a.372.372 0 0 1-.147-.243.763.763 0 0 1 .05-.363l.817-2.43-2.086-1.5a.777.777 0 0 1-.254-.265.354.354 0 0 1 .16-.489.798.798 0 0 1 .363-.07h2.559l.777-2.426a.84.84 0 0 1 .176-.324.353.353 0 0 1 .258-.11c.101 0 .187.037.258.11a.808.808 0 0 1 .18.324l.777 2.426h2.558c.151 0 .272.024.364.07a.354.354 0 0 1 .16.488.777.777 0 0 1-.254.266l-2.086 1.5.816 2.43a.72.72 0 0 1 .047.363.358.358 0 0 1-.144.243.321.321 0 0 1-.274.062.842.842 0 0 1-.332-.156l-2.07-1.52-2.067 1.52a.842.842 0 0 1-.332.156.321.321 0 0 1-.273-.062Zm10.274 0a.372.372 0 0 1-.148-.243.763.763 0 0 1 .05-.363l.817-2.43-2.086-1.5a.777.777 0 0 1-.254-.265.354.354 0 0 1 .16-.489.798.798 0 0 1 .364-.07h2.558l.778-2.426a.838.838 0 0 1 .175-.324.353.353 0 0 1 .258-.11c.102 0 .188.037.258.11a.809.809 0 0 1 .18.324l.777 2.426h2.559c.15 0 .272.024.363.07a.354.354 0 0 1 .16.488.777.777 0 0 1-.254.266l-2.086 1.5.817 2.43a.72.72 0 0 1 .047.363.358.358 0 0 1-.145.243.321.321 0 0 1-.273.062.842.842 0 0 1-.332-.156l-2.07-1.52-2.067 1.52a.841.841 0 0 1-.332.156.321.321 0 0 1-.274-.062Zm10.274 0a.372.372 0 0 1-.149-.243.763.763 0 0 1 .051-.363l.817-2.43-2.086-1.5a.777.777 0 0 1-.254-.265.353.353 0 0 1 .16-.489.798.798 0 0 1 .363-.07h2.559l.777-2.426a.84.84 0 0 1 .176-.324.353.353 0 0 1 .258-.11c.101 0 .187.037.258.11a.809.809 0 0 1 .18.324l.777 2.426h2.558c.151 0 .272.024.363.07a.354.354 0 0 1 .16.488.777.777 0 0 1-.253.266l-2.086 1.5.816 2.43a.72.72 0 0 1 .047.363.358.358 0 0 1-.145.243.322.322 0 0 1-.273.062.842.842 0 0 1-.332-.156l-2.07-1.52-2.067 1.52a.842.842 0 0 1-.332.156.321.321 0 0 1-.273-.062Zm10.273 0a.372.372 0 0 1-.148-.243.763.763 0 0 1 .05-.363L34 5.941l-2.086-1.5a.776.776 0 0 1-.254-.265.354.354 0 0 1 .16-.489.798.798 0 0 1 .364-.07h2.558l.778-2.426a.84.84 0 0 1 .175-.324.353.353 0 0 1 .258-.11c.102 0 .188.037.258.11a.807.807 0 0 1 .18.324l.777 2.426h2.559c.15 0 .272.024.363.07a.353.353 0 0 1 .16.488.777.777 0 0 1-.254.266l-2.086 1.5.817 2.43c.049.14.065.262.046.363a.358.358 0 0 1-.144.243.321.321 0 0 1-.273.062.842.842 0 0 1-.333-.156l-2.07-1.52-2.066 1.52a.842.842 0 0 1-.332.156.322.322 0 0 1-.274-.062Zm10.274 0a.373.373 0 0 1-.149-.243.765.765 0 0 1 .051-.363l.816-2.43-2.086-1.5a.777.777 0 0 1-.253-.265.353.353 0 0 1 .16-.489.797.797 0 0 1 .363-.07h2.559l.777-2.426a.837.837 0 0 1 .176-.324.353.353 0 0 1 .258-.11c.101 0 .187.037.257.11a.809.809 0 0 1 .18.324l.777 2.426H50c.151 0 .272.024.363.07a.354.354 0 0 1 .16.488.776.776 0 0 1-.253.266l-2.086 1.5.816 2.43a.72.72 0 0 1 .047.363.358.358 0 0 1-.145.243.321.321 0 0 1-.273.062.842.842 0 0 1-.332-.156l-2.07-1.52-2.067 1.52a.842.842 0 0 1-.332.156.321.321 0 0 1-.273-.062Z";

export function StarRating({ rating, ...props }: StarRatingProps) {
  const maskId = useId();

  return (
    <svg
      {...props}
      fill="none"
      viewBox="0 0 52 10"
      role="img"
      aria-label="5 star rating"
    >
      <title>{`${rating.toString()} star rating`}</title>
      <mask
        id={maskId}
        viewBox="0 0 52 10"
        x="0"
        y="0"
        maskUnits="userSpaceOnUse"
        style={{ maskType: "alpha" }}
      >
        <path className="fill-primary" d={path} />
      </mask>

      <g mask={`url(#${maskId})`}>
        <path strokeWidth={1} className="stroke-primary" d={path} />
        <rect
          width={Math.floor(52 * (rating / 5))}
          height={10}
          className="fill-primary"
        />
      </g>
    </svg>
  );
}
