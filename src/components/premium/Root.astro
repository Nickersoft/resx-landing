---
import { Separator } from "@/components/ui/Separator";
import { Stack } from "@/components/ui/Stack";
import { Typography } from "@/components/ui/Typography";
import {
  Calendar,
  ClockTimeTwo,
  HandCoin,
  LocalRestaurant,
  NotificationsActive,
  StarCircleOutline,
} from "@/icons";
import InView from "../InView.astro";
---

<InView once>
  <section
    id="premium"
    class="relative container grid grid-cols-2 items-center gap-y-16 overflow-y-clip py-24 max-lg:grid-cols-1"
  >
    <aside class="space-y-8">
      <header>
        <slot name="title" />
        <slot name="description" />
      </header>

      <slot name="feature-list" />
    </aside>

    <div class="relative h-full min-h-100">
      <video
        id="premium-video"
        width="100%"
        class="absolute top-0 left-1/2 max-w-[400px] -translate-x-1/2 mask-y-from-90% mask-y-to-transparent mask-x-from-90% mask-x-to-transparent lg:-mt-16"
        height="auto"
        muted
        playsinline
      >
        <source src="/video/phone.webm" type="video/webm" />
      </video>
    </div>

    <div
      class="in-view:translate-y-[80%] absolute right-0 bottom-0 z-10 translate-y-full transition-transform duration-1000"
    >
      <div class="relative aspect-[1.3] w-[50vw] opacity-90">
        <div
          class="from-sand-storm to-cinnamon absolute inset-0 rounded-full bg-radial mix-blend-plus-lighter blur-[80px]"
        >
        </div>
        <div
          class="from-sand-storm to-cinnamon absolute inset-0 rounded-full bg-radial opacity-50 mix-blend-plus-lighter blur-[150px]"
        >
        </div>
      </div>
    </div>
  </section>
</InView>

<script>
  import { inView } from "motion";

  const section = document.getElementById("premium");
  const video = document.getElementById("premium-video") as HTMLVideoElement;

  if (section && video) {
    inView(
      section,
      () => {
        video.play().catch((e) => {
          console.error("Error playing video:", e);
        });
      },
      { amount: 0.2 },
    );
  }
</script>
