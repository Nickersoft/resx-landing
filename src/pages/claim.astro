---
import { getEntry, getCollection } from "astro:content";
import { Image } from "astro:assets";

import earn from "@/assets/earn.png";
import share from "@/assets/share.png";
import notifications from "@/assets/notifications.png";
import phone from "@/assets/phone-submit.png";

import * as Hero from "@/components/hero";
import * as HowItWorks from "@/components/how-it-works";
import * as Testimonials from "@/components/testimonials";
import * as SellingPoints from "@/components/selling-points";
import * as FAQ from "@/components/faq";

import PageLayout from "@/layouts/PageLayout.astro";
import TextAccent from "@/components/TextAccent.astro";

import {
  EmoticonOutline,
  Heart,
  Lock,
  PartyPopper,
  Star,
  StarShooting,
  TrayArrowUp,
} from "@/icons";

const testimonial = await getEntry("testimonials", "sl");

const faqs = (await getCollection("faq")).map((faq) => ({
  answer: faq.rendered?.html ?? "",
  id: faq.id,
  question: faq.data.question,
}));
---

<PageLayout title="Submit" templated>
  {/* Hero Section */}

  <Hero.Root>
    <Hero.Title
      className="animate-in fill-mode-both slide-in-from-bottom-10 fade-in inline-block text-[4.5em] text-wrap duration-1000 ease-out"
      slot="title"
    >
      Last-minute dinner?
      <TextAccent
        class="animate-in fill-mode-both slide-in-from-bottom-10 fade-in text-primary inline-block delay-130 duration-1000 ease-out"
      >
        Skip the wait with ResX.
      </TextAccent>
    </Hero.Title>

    <Hero.Subtitle slot="subtitle">
      <strong>Snag the coveted tables that other diners can't use</strong> and turn
      any night into your perfect night out. No connections, no waitlists, no hassle.
    </Hero.Subtitle>

    <Image
      src={phone}
      layout="constrained"
      class="animate-in slide-in-from-right mt-24 mask-b-from-50% mask-b-to-transparent duration-1200 ease-out"
      alt="Submission screen"
      slot="visual"
    />
  </Hero.Root>

  {/* How It Works Section */}

  <HowItWorks.Root>
    <HowItWorks.Header>
      How it <TextAccent>works</TextAccent>
    </HowItWorks.Header>
    <HowItWorks.StepList>
      <HowItWorks.Step
        title="Discover"
        description="Browse last-minute tables submitted by our community of diners."
      >
        <TrayArrowUp slot="icon" />
        <Image
          src={share}
          layout="full-width"
          slot="image"
          class="object-bottom! max-lg:object-top!"
          alt="Discover"
        />
      </HowItWorks.Step>
      <HowItWorks.Step
        title="Claim"
        description="See a spot you like? Secure your reservation instantly with just a few taps."
      >
        <StarShooting slot="icon" />
        <Image
          src={earn}
          class="object-bottom! max-lg:object-top!"
          layout="full-width"
          slot="image"
          alt="Claim"
        />
      </HowItWorks.Step>
      <HowItWorks.Step
        title="You're In"
        description="Get confirmed 2 hours beforehand & ask the original submitter any questions you have."
      >
        <EmoticonOutline slot="icon" />
        <Image
          src={notifications}
          class="object-[50%_70%] max-lg:object-[50%_20%]"
          layout="full-width"
          slot="image"
          alt="You're In"
        />
      </HowItWorks.Step>
    </HowItWorks.StepList>
  </HowItWorks.Root>

  <SellingPoints.Root>
    <SellingPoints.Title>
      <TextAccent>Your shortcut</TextAccent> to a better table
    </SellingPoints.Title>
    <SellingPoints.List>
      <SellingPoints.Item
        title="Unlock the exclusive"
        description="Score hard-to-get tables at the city's most coveted tables without the waitlists or hassle."
      >
        <Star />
      </SellingPoints.Item>
      <SellingPoints.Item
        title="Seamless & secure"
        description="Our process is simple, secure, and completely risk-free from start to finish."
      >
        <Lock />
      </SellingPoints.Item>
      <SellingPoints.Item
        title="Diner-to-Diner"
        description="Every table comes from a trusted community member. No scalpers or bots here."
      >
        <Heart />
      </SellingPoints.Item>
      <SellingPoints.Item
        title="Embrace Spontaneity"
        description="The best nights are unplanned. Discover and claim your perfect last-minute table for tonight."
      >
        <PartyPopper />
      </SellingPoints.Item>
    </SellingPoints.List>
  </SellingPoints.Root>

  {/* FAQ Section */}

  <FAQ.Root>
    <FAQ.Title>
      Frequently Asked <TextAccent>Questions</TextAccent>
    </FAQ.Title>
    <FAQ.QuestionList client:visible questions={faqs} />
  </FAQ.Root>
</PageLayout>
